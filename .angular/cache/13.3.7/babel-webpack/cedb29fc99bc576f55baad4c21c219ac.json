{"ast":null,"code":"import _regeneratorRuntime from \"/Users/raulmelo/Documents/projetos/design-system/storybook-wyz/node_modules/@babel/runtime/regenerator/index.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nimport global from 'global';\nimport { STORY_RENDER_PHASE_CHANGED, STORY_RENDERED } from '@storybook/core-events';\nvar AbortController = global.AbortController;\n\nfunction createController() {\n  if (AbortController) return new AbortController(); // Polyfill for IE11\n\n  return {\n    signal: {\n      aborted: false\n    },\n    abort: function abort() {\n      this.signal.aborted = true;\n    }\n  };\n}\n\nexport var PREPARE_ABORTED = new Error('prepareAborted');\nexport var StoryRender = /*#__PURE__*/function () {\n  function StoryRender(channel, store, renderToScreen, callbacks, id, viewMode, story) {\n    _classCallCheck(this, StoryRender);\n\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.story = void 0;\n    this.phase = void 0;\n    this.abortController = void 0;\n    this.canvasElement = void 0;\n    this.notYetRendered = true;\n    this.disableKeyListeners = false;\n    this.abortController = createController(); // Allow short-circuiting preparing if we happen to already\n    // have the story (this is used by docs mode)\n\n    if (story) {\n      this.story = story; // TODO -- what should the phase be now?\n      // TODO -- should we emit the render phase changed event?\n\n      this.phase = 'preparing';\n    }\n  }\n\n  _createClass(StoryRender, [{\n    key: \"runPhase\",\n    value: function () {\n      var _runPhase = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(signal, phase, phaseFn) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.phase = phase;\n                this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                  newPhase: this.phase,\n                  storyId: this.id\n                });\n\n                if (!phaseFn) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 5;\n                return phaseFn();\n\n              case 5:\n                if (signal.aborted) {\n                  this.phase = 'aborted';\n                  this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                    newPhase: this.phase,\n                    storyId: this.id\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function runPhase(_x, _x2, _x3) {\n        return _runPhase.apply(this, arguments);\n      }\n\n      return runPhase;\n    }()\n  }, {\n    key: \"prepare\",\n    value: function () {\n      var _prepare = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.runPhase(this.abortController.signal, 'preparing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return _this.store.loadStory({\n                            storyId: _this.id\n                          });\n\n                        case 2:\n                          _this.story = _context2.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })));\n\n              case 2:\n                if (!this.abortController.signal.aborted) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                this.store.cleanupStory(this.story);\n                throw PREPARE_ABORTED;\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function prepare() {\n        return _prepare.apply(this, arguments);\n      }\n\n      return prepare;\n    }() // The two story \"renders\" are equal and have both loaded the same story\n\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      return other && this.id === other.id && this.story && this.story === other.story;\n    }\n  }, {\n    key: \"isPreparing\",\n    value: function isPreparing() {\n      return ['preparing'].includes(this.phase);\n    }\n  }, {\n    key: \"isPending\",\n    value: function isPending() {\n      return ['rendering', 'playing'].includes(this.phase);\n    }\n  }, {\n    key: \"context\",\n    value: function context() {\n      return this.store.getStoryContext(this.story);\n    }\n  }, {\n    key: \"renderToElement\",\n    value: function () {\n      var _renderToElement = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(canvasElement) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.canvasElement = canvasElement; // FIXME: this comment\n                // Start the first (initial) render. We don't await here because we need to return the \"cleanup\"\n                // function below right away, so if the user changes story during the first render we can cancel\n                // it without having to first wait for it to finish.\n                // Whenever the selection changes we want to force the component to be remounted.\n\n                return _context4.abrupt(\"return\", this.render({\n                  initial: true,\n                  forceRemount: true\n                }));\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function renderToElement(_x4) {\n        return _renderToElement.apply(this, arguments);\n      }\n\n      return renderToElement;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        var _this2 = this;\n\n        var _ref2,\n            _ref2$initial,\n            initial,\n            _ref2$forceRemount,\n            forceRemount,\n            _this$story,\n            id,\n            componentId,\n            title,\n            name,\n            applyLoaders,\n            unboundStoryFn,\n            playFunction,\n            abortSignal,\n            loadedContext,\n            renderStoryContext,\n            _renderContext,\n            _args9 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _ref2 = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {}, _ref2$initial = _ref2.initial, initial = _ref2$initial === void 0 ? false : _ref2$initial, _ref2$forceRemount = _ref2.forceRemount, forceRemount = _ref2$forceRemount === void 0 ? false : _ref2$forceRemount;\n\n                if (this.story) {\n                  _context9.next = 3;\n                  break;\n                }\n\n                throw new Error('cannot render when not prepared');\n\n              case 3:\n                _this$story = this.story, id = _this$story.id, componentId = _this$story.componentId, title = _this$story.title, name = _this$story.name, applyLoaders = _this$story.applyLoaders, unboundStoryFn = _this$story.unboundStoryFn, playFunction = _this$story.playFunction;\n\n                if (forceRemount && !initial) {\n                  // NOTE: we don't check the cancel actually worked here, so the previous\n                  // render could conceivably still be running after this call.\n                  // We might want to change that in the future.\n                  this.cancelRender();\n                  this.abortController = createController();\n                } // We need a stable reference to the signal -- if a re-mount happens the\n                // abort controller may be torn down (above) before we actually check the signal.\n\n\n                abortSignal = this.abortController.signal;\n                _context9.prev = 6;\n                _context9.next = 9;\n                return this.runPhase(abortSignal, 'loading', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n                  return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _context5.next = 2;\n                          return applyLoaders(Object.assign({}, _this2.context(), {\n                            viewMode: _this2.viewMode\n                          }));\n\n                        case 2:\n                          loadedContext = _context5.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                })));\n\n              case 9:\n                if (!abortSignal.aborted) {\n                  _context9.next = 11;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 11:\n                renderStoryContext = Object.assign({}, loadedContext, this.context(), {\n                  abortSignal: abortSignal,\n                  canvasElement: this.canvasElement\n                });\n                _renderContext = Object.assign({\n                  componentId: componentId,\n                  title: title,\n                  kind: title,\n                  id: id,\n                  name: name,\n                  story: name\n                }, this.callbacks, {\n                  forceRemount: forceRemount || this.notYetRendered,\n                  storyContext: renderStoryContext,\n                  storyFn: function storyFn() {\n                    return unboundStoryFn(renderStoryContext);\n                  },\n                  unboundStoryFn: unboundStoryFn\n                });\n                _context9.next = 15;\n                return this.runPhase(abortSignal, 'rendering', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n                  return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          return _context6.abrupt(\"return\", _this2.renderToScreen(_renderContext, _this2.canvasElement));\n\n                        case 1:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                })));\n\n              case 15:\n                this.notYetRendered = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 18;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 18:\n                if (!(forceRemount && playFunction)) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                this.disableKeyListeners = true;\n                _context9.next = 22;\n                return this.runPhase(abortSignal, 'playing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n                  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          return _context7.abrupt(\"return\", playFunction(_renderContext.storyContext));\n\n                        case 1:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                })));\n\n              case 22:\n                _context9.next = 24;\n                return this.runPhase(abortSignal, 'played');\n\n              case 24:\n                this.disableKeyListeners = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 27:\n                _context9.next = 29;\n                return this.runPhase(abortSignal, 'completed', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n                  return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          return _context8.abrupt(\"return\", _this2.channel.emit(STORY_RENDERED, id));\n\n                        case 1:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                })));\n\n              case 29:\n                _context9.next = 34;\n                break;\n\n              case 31:\n                _context9.prev = 31;\n                _context9.t0 = _context9[\"catch\"](6);\n                this.callbacks.showException(_context9.t0);\n\n              case 34:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[6, 31]]);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: \"rerender\",\n    value: function () {\n      var _rerender = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", this.render());\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function rerender() {\n        return _rerender.apply(this, arguments);\n      }\n\n      return rerender;\n    }()\n  }, {\n    key: \"remount\",\n    value: function () {\n      var _remount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11() {\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                return _context11.abrupt(\"return\", this.render({\n                  forceRemount: true\n                }));\n\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function remount() {\n        return _remount.apply(this, arguments);\n      }\n\n      return remount;\n    }() // If the story is torn down (either a new story is rendered or the docs page removes it)\n    // we need to consider the fact that the initial render may not be finished\n    // (possibly the loaders or the play function are still running). We use the controller\n    // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n    // happens inside the user's code.\n\n  }, {\n    key: \"cancelRender\",\n    value: function cancelRender() {\n      this.abortController.abort();\n    }\n  }, {\n    key: \"teardown\",\n    value: function () {\n      var _teardown = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12() {\n        var options,\n            i,\n            _args12 = arguments;\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                options = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {};\n                this.cancelRender(); // If the story has loaded, we need to cleanup\n\n                if (this.story) this.store.cleanupStory(this.story); // Check if we're done rendering/playing. If not, we may have to reload the page.\n                // Wait several ticks that may be needed to handle the abort, then try again.\n                // Note that there's a max of 5 nested timeouts before they're no longer \"instant\".\n\n                i = 0;\n\n              case 4:\n                if (!(i < 3)) {\n                  _context12.next = 12;\n                  break;\n                }\n\n                if (this.isPending()) {\n                  _context12.next = 7;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 7:\n                _context12.next = 9;\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, 0);\n                });\n\n              case 9:\n                i += 1;\n                _context12.next = 4;\n                break;\n\n              case 12:\n                // If we still haven't completed, reload the page (iframe) to ensure we have a clean slate\n                // for the next render. Since the reload can take a brief moment to happen, we want to stop\n                // further rendering by awaiting a never-resolving promise (which is destroyed on reload).\n                global.window.location.reload();\n                _context12.next = 15;\n                return new Promise(function () {});\n\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function teardown() {\n        return _teardown.apply(this, arguments);\n      }\n\n      return teardown;\n    }()\n  }]);\n\n  return StoryRender;\n}();\nStoryRender.displayName = \"StoryRender\";","map":{"version":3,"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","global","STORY_RENDER_PHASE_CHANGED","STORY_RENDERED","AbortController","createController","signal","aborted","abort","PREPARE_ABORTED","Error","StoryRender","channel","store","renderToScreen","callbacks","id","viewMode","story","phase","abortController","canvasElement","notYetRendered","disableKeyListeners","_runPhase","mark","_callee","phaseFn","wrap","_callee$","_context","prev","next","emit","newPhase","storyId","stop","runPhase","_x","_x2","_x3","_prepare","_callee3","_this","_callee3$","_context3","_callee2","_callee2$","_context2","loadStory","sent","cleanupStory","prepare","isEqual","other","isPreparing","includes","isPending","context","getStoryContext","_renderToElement","_callee4","_callee4$","_context4","abrupt","render","initial","forceRemount","renderToElement","_x4","_render","_callee9","_this2","_ref2","_ref2$initial","_ref2$forceRemount","_this$story","componentId","title","name","applyLoaders","unboundStoryFn","playFunction","abortSignal","loadedContext","renderStoryContext","_renderContext","_args9","_callee9$","_context9","cancelRender","_callee5","_callee5$","_context5","assign","kind","storyContext","storyFn","_callee6","_callee6$","_context6","_callee7","_callee7$","_context7","_callee8","_callee8$","_context8","t0","showException","_rerender","_callee10","_callee10$","_context10","rerender","_remount","_callee11","_callee11$","_context11","remount","_teardown","_callee12","options","_args12","_callee12$","_context12","setTimeout","window","location","reload","teardown","displayName"],"sources":["/Users/raulmelo/Documents/projetos/design-system/storybook-wyz/node_modules/@storybook/preview-web/dist/esm/StoryRender.js"],"sourcesContent":["import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport { STORY_RENDER_PHASE_CHANGED, STORY_RENDERED } from '@storybook/core-events';\nvar AbortController = global.AbortController;\n\nfunction createController() {\n  if (AbortController) return new AbortController(); // Polyfill for IE11\n\n  return {\n    signal: {\n      aborted: false\n    },\n    abort: function abort() {\n      this.signal.aborted = true;\n    }\n  };\n}\n\nexport var PREPARE_ABORTED = new Error('prepareAborted');\nexport var StoryRender = /*#__PURE__*/function () {\n  function StoryRender(channel, store, renderToScreen, callbacks, id, viewMode, story) {\n    _classCallCheck(this, StoryRender);\n\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.story = void 0;\n    this.phase = void 0;\n    this.abortController = void 0;\n    this.canvasElement = void 0;\n    this.notYetRendered = true;\n    this.disableKeyListeners = false;\n    this.abortController = createController(); // Allow short-circuiting preparing if we happen to already\n    // have the story (this is used by docs mode)\n\n    if (story) {\n      this.story = story; // TODO -- what should the phase be now?\n      // TODO -- should we emit the render phase changed event?\n\n      this.phase = 'preparing';\n    }\n  }\n\n  _createClass(StoryRender, [{\n    key: \"runPhase\",\n    value: function () {\n      var _runPhase = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(signal, phase, phaseFn) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.phase = phase;\n                this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                  newPhase: this.phase,\n                  storyId: this.id\n                });\n\n                if (!phaseFn) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 5;\n                return phaseFn();\n\n              case 5:\n                if (signal.aborted) {\n                  this.phase = 'aborted';\n                  this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                    newPhase: this.phase,\n                    storyId: this.id\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function runPhase(_x, _x2, _x3) {\n        return _runPhase.apply(this, arguments);\n      }\n\n      return runPhase;\n    }()\n  }, {\n    key: \"prepare\",\n    value: function () {\n      var _prepare = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.runPhase(this.abortController.signal, 'preparing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                  return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return _this.store.loadStory({\n                            storyId: _this.id\n                          });\n\n                        case 2:\n                          _this.story = _context2.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })));\n\n              case 2:\n                if (!this.abortController.signal.aborted) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                this.store.cleanupStory(this.story);\n                throw PREPARE_ABORTED;\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function prepare() {\n        return _prepare.apply(this, arguments);\n      }\n\n      return prepare;\n    }() // The two story \"renders\" are equal and have both loaded the same story\n\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      return other && this.id === other.id && this.story && this.story === other.story;\n    }\n  }, {\n    key: \"isPreparing\",\n    value: function isPreparing() {\n      return ['preparing'].includes(this.phase);\n    }\n  }, {\n    key: \"isPending\",\n    value: function isPending() {\n      return ['rendering', 'playing'].includes(this.phase);\n    }\n  }, {\n    key: \"context\",\n    value: function context() {\n      return this.store.getStoryContext(this.story);\n    }\n  }, {\n    key: \"renderToElement\",\n    value: function () {\n      var _renderToElement = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(canvasElement) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.canvasElement = canvasElement; // FIXME: this comment\n                // Start the first (initial) render. We don't await here because we need to return the \"cleanup\"\n                // function below right away, so if the user changes story during the first render we can cancel\n                // it without having to first wait for it to finish.\n                // Whenever the selection changes we want to force the component to be remounted.\n\n                return _context4.abrupt(\"return\", this.render({\n                  initial: true,\n                  forceRemount: true\n                }));\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function renderToElement(_x4) {\n        return _renderToElement.apply(this, arguments);\n      }\n\n      return renderToElement;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        var _this2 = this;\n\n        var _ref2,\n            _ref2$initial,\n            initial,\n            _ref2$forceRemount,\n            forceRemount,\n            _this$story,\n            id,\n            componentId,\n            title,\n            name,\n            applyLoaders,\n            unboundStoryFn,\n            playFunction,\n            abortSignal,\n            loadedContext,\n            renderStoryContext,\n            _renderContext,\n            _args9 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _ref2 = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {}, _ref2$initial = _ref2.initial, initial = _ref2$initial === void 0 ? false : _ref2$initial, _ref2$forceRemount = _ref2.forceRemount, forceRemount = _ref2$forceRemount === void 0 ? false : _ref2$forceRemount;\n\n                if (this.story) {\n                  _context9.next = 3;\n                  break;\n                }\n\n                throw new Error('cannot render when not prepared');\n\n              case 3:\n                _this$story = this.story, id = _this$story.id, componentId = _this$story.componentId, title = _this$story.title, name = _this$story.name, applyLoaders = _this$story.applyLoaders, unboundStoryFn = _this$story.unboundStoryFn, playFunction = _this$story.playFunction;\n\n                if (forceRemount && !initial) {\n                  // NOTE: we don't check the cancel actually worked here, so the previous\n                  // render could conceivably still be running after this call.\n                  // We might want to change that in the future.\n                  this.cancelRender();\n                  this.abortController = createController();\n                } // We need a stable reference to the signal -- if a re-mount happens the\n                // abort controller may be torn down (above) before we actually check the signal.\n\n\n                abortSignal = this.abortController.signal;\n                _context9.prev = 6;\n                _context9.next = 9;\n                return this.runPhase(abortSignal, 'loading', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n                  return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _context5.next = 2;\n                          return applyLoaders(Object.assign({}, _this2.context(), {\n                            viewMode: _this2.viewMode\n                          }));\n\n                        case 2:\n                          loadedContext = _context5.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                })));\n\n              case 9:\n                if (!abortSignal.aborted) {\n                  _context9.next = 11;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 11:\n                renderStoryContext = Object.assign({}, loadedContext, this.context(), {\n                  abortSignal: abortSignal,\n                  canvasElement: this.canvasElement\n                });\n                _renderContext = Object.assign({\n                  componentId: componentId,\n                  title: title,\n                  kind: title,\n                  id: id,\n                  name: name,\n                  story: name\n                }, this.callbacks, {\n                  forceRemount: forceRemount || this.notYetRendered,\n                  storyContext: renderStoryContext,\n                  storyFn: function storyFn() {\n                    return unboundStoryFn(renderStoryContext);\n                  },\n                  unboundStoryFn: unboundStoryFn\n                });\n                _context9.next = 15;\n                return this.runPhase(abortSignal, 'rendering', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n                  return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          return _context6.abrupt(\"return\", _this2.renderToScreen(_renderContext, _this2.canvasElement));\n\n                        case 1:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                })));\n\n              case 15:\n                this.notYetRendered = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 18;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 18:\n                if (!(forceRemount && playFunction)) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                this.disableKeyListeners = true;\n                _context9.next = 22;\n                return this.runPhase(abortSignal, 'playing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n                  return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          return _context7.abrupt(\"return\", playFunction(_renderContext.storyContext));\n\n                        case 1:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                })));\n\n              case 22:\n                _context9.next = 24;\n                return this.runPhase(abortSignal, 'played');\n\n              case 24:\n                this.disableKeyListeners = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 27:\n                _context9.next = 29;\n                return this.runPhase(abortSignal, 'completed', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n                  return regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          return _context8.abrupt(\"return\", _this2.channel.emit(STORY_RENDERED, id));\n\n                        case 1:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                })));\n\n              case 29:\n                _context9.next = 34;\n                break;\n\n              case 31:\n                _context9.prev = 31;\n                _context9.t0 = _context9[\"catch\"](6);\n                this.callbacks.showException(_context9.t0);\n\n              case 34:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[6, 31]]);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: \"rerender\",\n    value: function () {\n      var _rerender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10() {\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", this.render());\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function rerender() {\n        return _rerender.apply(this, arguments);\n      }\n\n      return rerender;\n    }()\n  }, {\n    key: \"remount\",\n    value: function () {\n      var _remount = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11() {\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                return _context11.abrupt(\"return\", this.render({\n                  forceRemount: true\n                }));\n\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function remount() {\n        return _remount.apply(this, arguments);\n      }\n\n      return remount;\n    }() // If the story is torn down (either a new story is rendered or the docs page removes it)\n    // we need to consider the fact that the initial render may not be finished\n    // (possibly the loaders or the play function are still running). We use the controller\n    // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n    // happens inside the user's code.\n\n  }, {\n    key: \"cancelRender\",\n    value: function cancelRender() {\n      this.abortController.abort();\n    }\n  }, {\n    key: \"teardown\",\n    value: function () {\n      var _teardown = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {\n        var options,\n            i,\n            _args12 = arguments;\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                options = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {};\n                this.cancelRender(); // If the story has loaded, we need to cleanup\n\n                if (this.story) this.store.cleanupStory(this.story); // Check if we're done rendering/playing. If not, we may have to reload the page.\n                // Wait several ticks that may be needed to handle the abort, then try again.\n                // Note that there's a max of 5 nested timeouts before they're no longer \"instant\".\n\n                i = 0;\n\n              case 4:\n                if (!(i < 3)) {\n                  _context12.next = 12;\n                  break;\n                }\n\n                if (this.isPending()) {\n                  _context12.next = 7;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 7:\n                _context12.next = 9;\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, 0);\n                });\n\n              case 9:\n                i += 1;\n                _context12.next = 4;\n                break;\n\n              case 12:\n                // If we still haven't completed, reload the page (iframe) to ensure we have a clean slate\n                // for the next render. Since the reload can take a brief moment to happen, we want to stop\n                // further rendering by awaiting a never-resolving promise (which is destroyed on reload).\n                global.window.location.reload();\n                _context12.next = 15;\n                return new Promise(function () {});\n\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function teardown() {\n        return _teardown.apply(this, arguments);\n      }\n\n      return teardown;\n    }()\n  }]);\n\n  return StoryRender;\n}();\nStoryRender.displayName = \"StoryRender\";"],"mappings":"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"},"metadata":{},"sourceType":"module"}